
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>STAT 159/259 Final Project: NIH Funding by Research, Condition, and Disease Categories &#8212; NIH Spending Final Project Stat 159/259</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Data analysis of NIH funding by spending category" href="README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">NIH Spending Final Project Stat 159/259</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="README.html">
   Data analysis of NIH funding by spending category
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  NIH Spending notebook
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   STAT 159/259 Final Project: NIH Funding by Research, Condition, and Disease Categories
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/main.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/UCB-stat-159-s22/hw07-group27.git/main?urlpath=tree/docs/main.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#research-questions">
   Research Questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#methods">
   Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reproducibility-critique-of-data-set">
     <em>
      Reproducibility Critique of Data Set
     </em>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis">
   Analysis
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#top-10-funding-categories-in-2019">
     <em>
      1. Top 10 Funding Categories in 2019
     </em>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#top-5-funding-categories-over-time">
     <em>
      2. Top 5 Funding Categories Over Time
     </em>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#relationship-between-spending-and-mortality">
     <em>
      3. Relationship Between Spending and Mortality
     </em>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#author-contributions">
   Author Contributions
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>STAT 159/259 Final Project: NIH Funding by Research, Condition, and Disease Categories</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#research-questions">
   Research Questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#methods">
   Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reproducibility-critique-of-data-set">
     <em>
      Reproducibility Critique of Data Set
     </em>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis">
   Analysis
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#top-10-funding-categories-in-2019">
     <em>
      1. Top 10 Funding Categories in 2019
     </em>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#top-5-funding-categories-over-time">
     <em>
      2. Top 5 Funding Categories Over Time
     </em>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#relationship-between-spending-and-mortality">
     <em>
      3. Relationship Between Spending and Mortality
     </em>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#author-contributions">
   Author Contributions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="stat-159-259-final-project-nih-funding-by-research-condition-and-disease-categories">
<h1>STAT 159/259 Final Project: NIH Funding by Research, Condition, and Disease Categories<a class="headerlink" href="#stat-159-259-final-project-nih-funding-by-research-condition-and-disease-categories" title="Permalink to this headline">¶</a></h1>
<p>Group Members: Madeline Adee, Nina Dickens, Tina Li.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This project is an analysis of National Institutes of Health (NIH) funding data. Data is provided publicly by the NIH on funding levels (in millions of dollars) by categories (defined by research, condition, or disease). Original data can be accessed <a class="reference external" href="https://report.nih.gov/funding/categorical-spending#/">here at the NIH Research Portfolio Online Reporting Tools</a> website. We do an exploratory analysis to see what the top funding categories are, how the top funding categories have changed over time, and what the relationship is between funding level and US mortlity rates.</p>
</div>
<div class="section" id="research-questions">
<h2>Research Questions<a class="headerlink" href="#research-questions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>What are the top 10 NIH funding categories in 2019?</p></li>
<li><p>For the top 5 NIH funding categories in 2019, has the trend changed over time?</p></li>
<li><p>What is the relationship between mortality rates and funding by category in 2019?</p></li>
</ul>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>We created an environment.yml file based on our environment for reproducibility, and have outsources some of our functions that involve more significant computation to the <strong>functiontools</strong> module in this repository.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">plotly.offline</span> <span class="k">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">functiontools</span> <span class="kn">import</span> <span class="n">functions</span> <span class="k">as</span> <span class="n">fun</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Set notebook mode to work in offline</span>
<span class="n">py</span><span class="o">.</span><span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.11.1.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>
</div></div>
</div>
</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<p>We downloaded the excel file available on this website and removed comments at the bottom to facilitate reading the data, but no changes were made to the raw data at this state. This modified file with no comments is saved here: data/raw_data/funding_data.csv.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span> <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;data/raw_data/funding_data.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We removed years prior to 2011 (because there was an additional column for two of the years &lt; 2011 without a clear explanation of how to interpret this column) and years after 2020 (since this data was projections only). This gives us a database of 10 years of funding data. However, since prevalence and mortality data are provided only for 2019, we decided to use this year as our endpoint year for analyses.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove pre-2011 data and years that are estimates only</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>To use the data effectively, we had to do some data cleaning. We created a couple of functions (in <strong>functiontools</strong> module) to cleanup the original data, since the excel formatting caused some issues. The original data included dollar signs, commas, and other symbols like asterisks to indicate missing data that need to be removed or recoded. Once this is done we have a cleaned data set with the category, a column for each year in the 10 year period (with dollar amounts in millions), and 2019 prevalence and mortality data for conditions/disease for which this was provided.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list of years to edit the way dollar amount is entered (remove $ sign)</span>
<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2011&#39;</span><span class="p">,</span><span class="s1">&#39;2012&#39;</span><span class="p">,</span><span class="s1">&#39;2013&#39;</span><span class="p">,</span> <span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="s1">&#39;2015&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2017&#39;</span><span class="p">,</span> <span class="s1">&#39;2018&#39;</span><span class="p">,</span> <span class="s1">&#39;2019&#39;</span><span class="p">,</span> <span class="s1">&#39;2020&#39;</span><span class="p">]</span>

<span class="c1"># function to cleanup messy data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">fun</span><span class="o">.</span><span class="n">cleanup</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">years</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>research_category</th>
      <th>2011</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
      <th>2019_US_Mortality_19</th>
      <th>2019_US_Prevalence_SE_19</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Acquired Cognitive Impairment</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>798.0</td>
      <td>1132.0</td>
      <td>1560.0</td>
      <td>1978.0</td>
      <td>2423.0</td>
      <td>2897.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Acute Respiratory Distress Syndrome</td>
      <td>96.0</td>
      <td>98.0</td>
      <td>95.0</td>
      <td>85.0</td>
      <td>108.0</td>
      <td>103.0</td>
      <td>107.0</td>
      <td>123.0</td>
      <td>126.0</td>
      <td>158.0</td>
      <td>10482.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Adolescent Sexual Activity</td>
      <td>69.0</td>
      <td>76.0</td>
      <td>70.0</td>
      <td>68.0</td>
      <td>85.0</td>
      <td>91.0</td>
      <td>99.0</td>
      <td>96.0</td>
      <td>102.0</td>
      <td>88.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Agent Orange &amp; Dioxin</td>
      <td>8.0</td>
      <td>8.0</td>
      <td>10.0</td>
      <td>8.0</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>11.0</td>
      <td>10.0</td>
      <td>8.0</td>
      <td>6.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Aging</td>
      <td>2572.0</td>
      <td>2593.0</td>
      <td>2429.0</td>
      <td>2556.0</td>
      <td>2698.0</td>
      <td>3150.0</td>
      <td>3572.0</td>
      <td>4084.0</td>
      <td>4653.0</td>
      <td>5276.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>294</th>
      <td>West Nile Virus</td>
      <td>65.0</td>
      <td>29.0</td>
      <td>40.0</td>
      <td>48.0</td>
      <td>40.0</td>
      <td>46.0</td>
      <td>42.0</td>
      <td>36.0</td>
      <td>24.0</td>
      <td>27.0</td>
      <td>90.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>295</th>
      <td>Women's Health 8</td>
      <td>3891.0</td>
      <td>3833.0</td>
      <td>3745.0</td>
      <td>3935.0</td>
      <td>3989.0</td>
      <td>4540.0</td>
      <td>4769.0</td>
      <td>5048.0</td>
      <td>4469.0</td>
      <td>4466.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>296</th>
      <td>Wound Healing and Care</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>163.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>297</th>
      <td>Youth Violence</td>
      <td>87.0</td>
      <td>77.0</td>
      <td>70.0</td>
      <td>59.0</td>
      <td>47.0</td>
      <td>46.0</td>
      <td>50.0</td>
      <td>46.0</td>
      <td>48.0</td>
      <td>38.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>298</th>
      <td>Youth Violence Prevention</td>
      <td>26.0</td>
      <td>27.0</td>
      <td>26.0</td>
      <td>16.0</td>
      <td>15.0</td>
      <td>17.0</td>
      <td>21.0</td>
      <td>22.0</td>
      <td>24.0</td>
      <td>21.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>299 rows × 13 columns</p>
</div></div></div>
</div>
<p>We saved this cleaned up data set in hdf5 format.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Export the pandas DataFrame into HDF5</span>
<span class="n">h5File</span> <span class="o">=</span> <span class="s2">&quot;data/cleaned_data/funding_data.hdf5&quot;</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">h5File</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/jovyan/envs/nih/lib/python3.9/site-packages/pandas/core/generic.py:2703: PerformanceWarning:


your performance may suffer as PyTables will pickle object types that it cannot
map directly to c-types [inferred_type-&gt;mixed,key-&gt;block1_values] [items-&gt;Index([&#39;research_category&#39;, &#39;2019_US_Prevalence_SE_19&#39;], dtype=&#39;object&#39;)]
</pre></div>
</div>
</div>
</div>
<p>Then we created another version of the data with the prevalence and mortality removed, including a version in long format, and save both of these in the folder of cleaned data. We do not use all saved versions of the data for this analysis currently, but they would be helpful for future analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove mortality and prevalence data for this dataset</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;2019_US_Mortality_19&#39;</span><span class="p">,</span> <span class="s1">&#39;2019_US_Prevalence_SE_19&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Export the pandas DataFrame into HDF5</span>
<span class="n">h5File2</span> <span class="o">=</span> <span class="s2">&quot;data/cleaned_data/funding_data_MP_removed.hdf5&quot;</span>
<span class="n">df2</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">h5File2</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create long format version of the above dataset</span>
<span class="n">df2_long</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="s1">&#39;research_category&#39;</span><span class="p">,</span> 
                   <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2011&#39;</span><span class="p">,</span><span class="s1">&#39;2012&#39;</span><span class="p">,</span><span class="s1">&#39;2013&#39;</span><span class="p">,</span> <span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="s1">&#39;2015&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2017&#39;</span><span class="p">,</span> <span class="s1">&#39;2018&#39;</span><span class="p">,</span> <span class="s1">&#39;2019&#39;</span><span class="p">,</span> <span class="s1">&#39;2020&#39;</span><span class="p">],</span> 
                   <span class="n">var_name</span> <span class="o">=</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">value_name</span> <span class="o">=</span> <span class="s1">&#39;millions&#39;</span><span class="p">)</span>

<span class="c1"># Export the pandas DataFrame into HDF5</span>
<span class="n">h5File3</span> <span class="o">=</span> <span class="s2">&quot;data/cleaned_data/funding_data_MP_removed_long.hdf5&quot;</span>
<span class="n">df2_long</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">h5File3</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">)</span>

<span class="c1"># diplay long format data</span>
<span class="n">display</span><span class="p">(</span><span class="n">df2_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>research_category</th>
      <th>year</th>
      <th>millions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Acquired Cognitive Impairment</td>
      <td>2011</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Acute Respiratory Distress Syndrome</td>
      <td>2011</td>
      <td>96.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Adolescent Sexual Activity</td>
      <td>2011</td>
      <td>69.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Agent Orange &amp; Dioxin</td>
      <td>2011</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Aging</td>
      <td>2011</td>
      <td>2572.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2985</th>
      <td>West Nile Virus</td>
      <td>2020</td>
      <td>27.0</td>
    </tr>
    <tr>
      <th>2986</th>
      <td>Women's Health 8</td>
      <td>2020</td>
      <td>4466.0</td>
    </tr>
    <tr>
      <th>2987</th>
      <td>Wound Healing and Care</td>
      <td>2020</td>
      <td>163.0</td>
    </tr>
    <tr>
      <th>2988</th>
      <td>Youth Violence</td>
      <td>2020</td>
      <td>38.0</td>
    </tr>
    <tr>
      <th>2989</th>
      <td>Youth Violence Prevention</td>
      <td>2020</td>
      <td>21.0</td>
    </tr>
  </tbody>
</table>
<p>2990 rows × 3 columns</p>
</div></div></div>
</div>
<p>Next we also tried to make a version of the data where the amount in millions is adjusted for inflation - but the cpi package did not work. We would recommend for future analyses that researchers consider adjusting the dollar amounts for inflation, but it is beyond the scope of our exploratory analysis to set this up manually.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#pd.to_datetime(df2_long[&#39;year&#39;])</span>
<span class="c1">#display(df2_long)</span>
<span class="c1">#df2_long[&#39;adjusted_millions&#39;] = df2_long.apply(lambda x: cpi.inflate(x.millions, x.year), axis=1)</span>
</pre></div>
</div>
</div>
</div>
<p>We created a final version of the data for some of the plots that is just the mortality and spending by category for 2019.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;research_category&#39;</span><span class="p">,</span> <span class="s1">&#39;2019_US_Mortality_19&#39;</span><span class="p">,</span> <span class="s1">&#39;2019&#39;</span><span class="p">]]</span>

<span class="c1"># Export the pandas DataFrame into HDF5</span>
<span class="n">h5File4</span> <span class="o">=</span> <span class="s2">&quot;data/cleaned_data/funding_data_2019.hdf5&quot;</span>
<span class="n">df3</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">h5File4</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reproducibility-critique-of-data-set">
<h3><em>Reproducibility Critique of Data Set</em><a class="headerlink" href="#reproducibility-critique-of-data-set" title="Permalink to this headline">¶</a></h3>
<p>The data was only available to download as an excel file, which is somewhat problematic for reproducibility. Due to werid layout and the inclusion of comments in random cells, we had to do some manual cleaning of the data we dowloaded and then save it as a csv. To improve ability to do research with this data in a reporodicible way, the NIH should consider storing the data in a better format, with a supplemental file of comments. Additionally, we did not use earlier years of data becase there was a code appended to the end of some of the columns that was not defined – a data dictionary should also be added to the original database to make sure researchers fully understand what each variable means and are able to use all of the data.</p>
</div>
</div>
<div class="section" id="analysis">
<h2>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="top-10-funding-categories-in-2019">
<h3><em>1. Top 10 Funding Categories in 2019</em><a class="headerlink" href="#top-10-funding-categories-in-2019" title="Permalink to this headline">¶</a></h3>
<p>In the first part of our analysis, we decided to find the top 10 categories funded in 2019 (The most recent year will full data availability). Our team asked the question: What are the top 10 spending categories in 2019? What about 2016? Firstly, we decided to filter the data to look mainly at the categories and spending amounts in 2019 to answer the first part of our question. To do so we had employ our <strong>change_to_float</strong> function to convert the data to floats.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use pandas again to read data from the hdf5 file to the pandas DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">h5File</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">);</span>

<span class="c1"># Filtering the data frame to only look at the year 2019 and the research category</span>
<span class="n">data2019</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;research_category&quot;</span><span class="p">,</span> <span class="s2">&quot;2019&quot;</span><span class="p">]]</span>

<span class="c1"># Using our float conversion function that can be found in functions.py file</span>
<span class="n">fun</span><span class="o">.</span><span class="n">change_to_float</span><span class="p">(</span><span class="n">data2019</span><span class="p">[</span><span class="s2">&quot;2019&quot;</span><span class="p">])</span>

<span class="n">datatop10</span> <span class="o">=</span> <span class="n">data2019</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;2019&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">datatop10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>research_category</th>
      <th>2019</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>60</th>
      <td>Clinical Research</td>
      <td>15868.0</td>
    </tr>
    <tr>
      <th>114</th>
      <td>Genetics</td>
      <td>9864.0</td>
    </tr>
    <tr>
      <th>225</th>
      <td>Prevention</td>
      <td>9485.0</td>
    </tr>
    <tr>
      <th>188</th>
      <td>Neurosciences</td>
      <td>9468.0</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Biotechnology</td>
      <td>7219.0</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Brain Disorders</td>
      <td>6954.0</td>
    </tr>
    <tr>
      <th>41</th>
      <td>Cancer</td>
      <td>6520.0</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Behavioral and Social Science</td>
      <td>6499.0</td>
    </tr>
    <tr>
      <th>142</th>
      <td>Infectious Diseases</td>
      <td>6313.0</td>
    </tr>
    <tr>
      <th>61</th>
      <td>Clinical Trials and Supportive Activities 17</td>
      <td>6058.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We then created bar charts of the top 10 funding categories in 2019.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># Graphing the first plot by using a bar chart</span>
<span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">datatop10</span><span class="p">[</span><span class="s2">&quot;research_category&quot;</span><span class="p">],</span><span class="n">datatop10</span><span class="p">[</span><span class="s2">&quot;2019&quot;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Top 10 Total Funding by NIH in 2019&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Funding (Millions $)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Funding Category&quot;</span><span class="p">)</span>

<span class="c1"># Saving the plot in figures folder</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig1a.png&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_32_0.png" src="_images/main_32_0.png" />
</div>
</div>
<p>From the following graph, our team devised some interesting findings. It seems that Clinical Research was the most heavily invested in 2019, followed by Genetics with around and then tied in third place is Neurosciences and Prevention with around $9000 million. It’s interesting to note that Clinical Research has almost two times the investment compared to the bottom of the top 10 list.</p>
<p>However, our team was interested to see if this occurred every year. As such, we built a function that enables to graph a graph based on the inputted year found in our <a class="reference external" href="http://function.py">function.py</a> file. This function can be seen and tested below. We include an example for 2016.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Here we test out the graph for 2016</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">h5File</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">)</span>
<span class="n">fun</span><span class="o">.</span><span class="n">draw_barchart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;2016&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/jovyan/homework/hw07-group25/functiontools/functions.py:54: SettingWithCopyWarning:


A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
</pre></div>
</div>
<img alt="_images/main_35_1.png" src="_images/main_35_1.png" />
</div>
</div>
<p>As we can see in the above graph, when we tested the year 2016, our group still came to similar conclusions. Clinical Research, Genetics, Prevention, and Neurosciences remainded top spenders even in 2016. Much like 2019, the Clinical Research spending remained almost double that of the bottom of the top 10, and Prevention, Genetics and Neurosciences remained closer together. However, there seems to be more variation at the bottom of the top 10. As time went on, NIH spending seemed to shift more towards Brain Disorders and Behavioral and Social Sciences.</p>
</div>
<div class="section" id="top-5-funding-categories-over-time">
<h3><em>2. Top 5 Funding Categories Over Time</em><a class="headerlink" href="#top-5-funding-categories-over-time" title="Permalink to this headline">¶</a></h3>
<p>Next our team was curious: Has the funding for the top 5 funding categories in 2019 changed over time? For this second part, we tried to look for the top 5 funding categories over time. We only included the year of 2016 to 2020. We changed format of the dataset and created a dataframe of only the top 5 funding categories which were clinical research, genetics, prevention, neurosciences, and biotechnology.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_recent</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;research_category&quot;</span><span class="p">,</span> <span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="s2">&quot;2017&quot;</span><span class="p">,</span> <span class="s2">&quot;2018&quot;</span><span class="p">,</span> <span class="s2">&quot;2019&quot;</span><span class="p">,</span> <span class="s2">&quot;2020&quot;</span><span class="p">]]</span>

<span class="c1"># Filtering for different years </span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="s2">&quot;2017&quot;</span><span class="p">,</span> <span class="s2">&quot;2018&quot;</span><span class="p">,</span> <span class="s2">&quot;2019&quot;</span><span class="p">,</span> <span class="s2">&quot;2020&quot;</span><span class="p">]:</span>
    <span class="n">data_recent</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">fun</span><span class="o">.</span><span class="n">change_to_float</span><span class="p">(</span><span class="n">data_recent</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_2712/136155729.py:5: SettingWithCopyWarning:


A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adjust the dataframes for the different top 5 category </span>
<span class="n">data_recent</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_recent</span><span class="p">[</span><span class="s1">&#39;2016&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">data_recent</span><span class="p">[</span><span class="s1">&#39;2017&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">data_recent</span><span class="p">[</span><span class="s1">&#39;2018&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">data_recent</span><span class="p">[</span><span class="s1">&#39;2019&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">data_recent</span><span class="p">[</span><span class="s1">&#39;2020&#39;</span><span class="p">]</span>
<span class="n">datatop5</span> <span class="o">=</span> <span class="n">data_recent</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;total&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
<span class="n">datatop5</span> <span class="o">=</span> <span class="n">datatop5</span><span class="p">[[</span><span class="s2">&quot;research_category&quot;</span><span class="p">,</span> <span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="s2">&quot;2017&quot;</span><span class="p">,</span> <span class="s2">&quot;2018&quot;</span><span class="p">,</span> <span class="s2">&quot;2019&quot;</span><span class="p">,</span> <span class="s2">&quot;2020&quot;</span><span class="p">]]</span>
<span class="n">datatop5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_2712/1596165561.py:2: SettingWithCopyWarning:


A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>research_category</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>60</th>
      <td>Clinical Research</td>
      <td>12176.0</td>
      <td>12695.0</td>
      <td>13870.0</td>
      <td>15868.0</td>
      <td>17610.0</td>
    </tr>
    <tr>
      <th>114</th>
      <td>Genetics</td>
      <td>8070.0</td>
      <td>8501.0</td>
      <td>9105.0</td>
      <td>9864.0</td>
      <td>10544.0</td>
    </tr>
    <tr>
      <th>225</th>
      <td>Prevention</td>
      <td>7566.0</td>
      <td>8052.0</td>
      <td>8757.0</td>
      <td>9485.0</td>
      <td>10482.0</td>
    </tr>
    <tr>
      <th>188</th>
      <td>Neurosciences</td>
      <td>6460.0</td>
      <td>7317.0</td>
      <td>8224.0</td>
      <td>9468.0</td>
      <td>10122.0</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Biotechnology</td>
      <td>6433.0</td>
      <td>6556.0</td>
      <td>6923.0</td>
      <td>7219.0</td>
      <td>7767.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># setting the index</span>
<span class="n">datatop5</span> <span class="o">=</span> <span class="n">datatop5</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;research_category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">datatop5</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">datatop5</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">datatop5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>research_category</th>
      <th>index</th>
      <th>Clinical Research</th>
      <th>Genetics</th>
      <th>Prevention</th>
      <th>Neurosciences</th>
      <th>Biotechnology</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2016</td>
      <td>12176.0</td>
      <td>8070.0</td>
      <td>7566.0</td>
      <td>6460.0</td>
      <td>6433.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017</td>
      <td>12695.0</td>
      <td>8501.0</td>
      <td>8052.0</td>
      <td>7317.0</td>
      <td>6556.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2018</td>
      <td>13870.0</td>
      <td>9105.0</td>
      <td>8757.0</td>
      <td>8224.0</td>
      <td>6923.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019</td>
      <td>15868.0</td>
      <td>9864.0</td>
      <td>9485.0</td>
      <td>9468.0</td>
      <td>7219.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>17610.0</td>
      <td>10544.0</td>
      <td>10482.0</td>
      <td>10122.0</td>
      <td>7767.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We then created a plot of the top 5 funding categories over time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Plotting the top 5 spending categories over time</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s1">&#39;Clinical Research &#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">datatop5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Clinical Research&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s1">&#39;Genetics &#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">datatop5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Genetics&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s1">&#39;Prevention &#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">datatop5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Prevention&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s1">&#39;Neurosciences &#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">datatop5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Neurosciences&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s1">&#39;Biotechnology &#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">datatop5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Biotechnology&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2020</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">));</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Funding (Millions $)&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Top 5 Funding Categories Over Time&quot;</span><span class="p">);</span>

<span class="c1"># Saving file under figures file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig2.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/main_43_0.png" src="_images/main_43_0.png" />
</div>
</div>
<p>From the plot above, we observed that the spending increased gradually over time. Clinical research had more spending compared to the other four categories. Note that here we did not include inflation. This could be the main reason why spending was increasing over time. To further study the trend, we might need to account for inflation in future analyses.</p>
</div>
<div class="section" id="relationship-between-spending-and-mortality">
<h3><em>3. Relationship Between Spending and Mortality</em><a class="headerlink" href="#relationship-between-spending-and-mortality" title="Permalink to this headline">¶</a></h3>
<p>Next our team, decided to look into the relationship between funding and mortality. We used data from 2019, as this was the year that both funding and US mortality rates were included in the dataset. We hypothesized that perhaps diseases or categories with higher mortality rates would have more funding. This led us to another insightful question: Is there a relationship between funding amounts, funding categories and mortality rates? We used cleaned data from 2019 and removed rows where there was no mortality data available (i.e. broad research areas like clinical research).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use pandas again to read data from the hdf5 file to the pandas DataFrame</span>
<span class="n">df2019</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">h5File4</span><span class="p">,</span> <span class="s2">&quot;/data/cleaned_data&quot;</span><span class="p">)</span>

<span class="c1"># select only the sample with no missing values for mortality or funding level</span>
<span class="n">df2019</span> <span class="o">=</span> <span class="n">df2019</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We then plotted mortality compared to funding in 2019, with a simple linear (OLS) regression. Since there was a high concentration of categories in the lower left corner of the plot, we used plotly to facilitate zooming in on the plot. Hovering over the points shows the funding category.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig3a</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df2019</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;2019&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;2019_US_Mortality_19&quot;</span><span class="p">,</span> <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;research_category&#39;</span><span class="p">],</span> 
                <span class="n">trendline</span><span class="o">=</span><span class="s2">&quot;ols&quot;</span><span class="p">,</span> 
                <span class="n">labels</span><span class="o">=</span><span class="p">{</span>
                     <span class="s2">&quot;2019_US_Mortality_19&quot;</span><span class="p">:</span> <span class="s2">&quot;Total Mortality (2019)&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;research_category&quot;</span><span class="p">:</span> <span class="s2">&quot;Research Category&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;2019&quot;</span><span class="p">:</span> <span class="s2">&quot;Funding Amount (Millions)&quot;</span>
                 <span class="p">},</span> 
                <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>


<span class="n">fig3a</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s2">&quot;Comparison of Funding and Mortality Levels (2019)&quot;</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mf">0.95</span><span class="p">,</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="s1">&#39;yanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;top&#39;</span><span class="p">})</span>

<span class="n">fig3a</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7000</span><span class="p">])</span>

<span class="n">fig3a</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="s2">&quot;figures/fig3a.png&quot;</span><span class="p">)</span>

<span class="c1">#fig3a.show()</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig3a</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;fig3c&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>                            <div id="5a31f3de-d3be-496f-a953-8caee2600f47" class="plotly-graph-div" style="height:600px; width:800px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("5a31f3de-d3be-496f-a953-8caee2600f47")) {                    Plotly.newPlot(                        "5a31f3de-d3be-496f-a953-8caee2600f47",                        [{"customdata":[["Acute Respiratory Distress Syndrome "],["Alcoholism, Alcohol Use and Health 1"],["Allergic Rhinitis (Hay Fever) "],["Alzheimer's Disease "],["Anorexia "],["Aphasia "],["Asthma "],["Ataxia Telangiectasia "],["Atherosclerosis "],["Attention Deficit Disorder (ADD) "],["Autism "],["Brain Cancer "],["Breast Cancer "],["Cachexia "],["Cancer "],["Cardiovascular "],["Cerebral Palsy "],["Cerebrovascular "],["Cervical Cancer "],["Chronic Fatigue Syndrome (ME/CFS) "],["Chronic Liver Disease and Cirrhosis "],["Chronic Obstructive Pulmonary Disease "],["Colo-Rectal Cancer "],["Crohn's Disease "],["Cystic Fibrosis "],["Depression "],["Diabetes 4"],["Digestive Diseases - (Gallbladder) "],["Digestive Diseases - (Peptic Ulcer) "],["Down Syndrome "],["Dystonia "],["Eating Disorders 6"],["Emphysema "],["Endometriosis "],["Epilepsy "],["Fetal Alcohol Syndrome "],["Fibroid Tumors (Uterine) "],["Fibromyalgia "],["Fragile X Syndrome "],["Frontotemporal Dementia (FTD) "],["Heart Disease "],["Heart Disease - Coronary Heart Disease "],["Hepatitis - A "],["Hepatitis - B "],["Hepatitis - C "],["HIV/AIDS 9"],["Hodgkin's Disease "],["Huntington's Disease "],["Hypertension "],["Inflammatory Bowel Disease "],["Influenza "],["Interstitial Cystitis "],["Lead Poisoning "],["Liver Cancer "],["Liver Disease "],["Lung Cancer "],["Lupus "],["Lyme Disease "],["Lymphoma "],["Macular Degeneration "],["Malaria "],["Mucopolysaccharidoses (MPS) "],["Multiple Sclerosis "],["Muscular Dystrophy "],["Myasthenia Gravis "],["Neonatal Respiratory Distress 20"],["Neurofibromatosis "],["Obesity "],["Opioid Misuse and Addiction 26"],["Osteogenesis Imperfecta "],["Osteoporosis "],["Otitis Media "],["Ovarian Cancer "],["Paget's Disease "],["Pancreatic Cancer "],["Parkinson's Disease "],["Pelvic Inflammatory Disease "],["Perinatal Period - Conditions Originating in Perinatal Period "],["Pneumonia "],["Pneumonia & Influenza "],["Polycystic Kidney Disease "],["Post-Traumatic Stress Disorder (PTSD) "],["Preterm, Low Birth Weight and Health of the Newborn 21"],["Prostate Cancer "],["Psoriasis "],["Rett Syndrome "],["Rheumatoid Arthritis "],["Schizophrenia "],["Scleroderma "],["Sepsis 15"],["Sickle Cell Disease "],["Spina Bifida "],["Spinal Cord Injury "],["Spinal Muscular Atrophy "],["Stroke "],["Sudden Infant Death Syndrome "],["Suicide "],["Temporomandibular Muscle/Joint Disorder (TMJD) "],["Tourette Syndrome "],["Transmissible Spongiform Encephalopathy (TSE) "],["Tuberculosis "],["Tuberous Sclerosis "],["Uterine Cancer "],["West Nile Virus "]],"hovertemplate":"Funding Amount (Millions)=%{x}<br>Total Mortality (2019)=%{y}<br>Research Category=%{customdata[0]}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[126.0,556.0,7.0,2240.0,11.0,43.0,313.0,8.0,400.0,64.0,290.0,359.0,709.0,19.0,6520.0,2394.0,28.0,759.0,106.0,15.0,351.0,112.0,294.0,76.0,82.0,578.0,1099.0,16.0,8.0,86.0,18.0,44.0,27.0,13.0,188.0,34.0,17.0,13.0,37.0,158.0,1443.0,421.0,3.0,67.0,150.0,3037.0,12.0,48.0,266.0,163.0,384.0,11.0,11.0,127.0,851.0,419.0,121.0,32.0,248.0,124.0,196.0,8.0,111.0,83.0,5.0,79.0,36.0,1109.0,811.0,12.0,151.0,13.0,168.0,2.0,219.0,224.0,5.0,784.0,146.0,521.0,31.0,138.0,374.0,263.0,16.0,15.0,94.0,263.0,24.0,137.0,139.0,16.0,103.0,13.0,350.0,11.0,117.0,17.0,11.0,34.0,488.0,25.0,36.0,24.0],"xaxis":"x","y":[10482.0,87566.0,98.0,146659.0,124.0,2477.0,10753.0,14.0,28625.0,85.0,362.0,17862.0,52938.0,10313.0,690509.0,1574518.0,3822.0,256352.0,4687.0,16.0,76761.0,312688.0,61368.0,2182.0,451.0,18054.0,283378.0,6626.0,7114.0,2249.0,241.0,217.0,17786.0,40.0,7711.0,19.0,100.0,592.0,38.0,2300.0,1592187.0,542903.0,225.0,1672.0,14242.0,7150.0,1446.0,1367.0,516955.0,3646.0,7611.0,39.0,2.0,30898.0,154284.0,150790.0,3554.0,96.0,27075.0,718.0,9.0,73.0,6497.0,1208.0,2000.0,791.0,360.0,47466.0,68126.0,85.0,7252.0,91.0,14620.0,131.0,48250.0,52359.0,366.0,13712.0,140661.0,148272.0,801.0,1993.0,4854.0,44395.0,572.0,85.0,9211.0,4624.0,8.0,201142.0,975.0,408.0,1410.0,117.0,214334.0,1277.0,47612.0,1.0,20.0,658.0,982.0,59.0,13036.0,90.0],"yaxis":"y","type":"scatter"},{"hovertemplate":"<b>OLS trendline</b><br>2019_US_Mortality_19 = 160.163 * 2019 + 23827.6<br>R<sup>2</sup>=0.270612<br><br>Funding Amount (Millions)=%{x}<br>Total Mortality (2019)=%{y} <b>(trend)</b><extra></extra>","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"lines","name":"","showlegend":false,"x":[2.0,3.0,5.0,5.0,7.0,8.0,8.0,8.0,11.0,11.0,11.0,11.0,11.0,12.0,12.0,13.0,13.0,13.0,13.0,15.0,15.0,16.0,16.0,16.0,17.0,17.0,18.0,19.0,24.0,24.0,25.0,27.0,28.0,31.0,32.0,34.0,34.0,36.0,36.0,37.0,43.0,44.0,48.0,64.0,67.0,76.0,79.0,82.0,83.0,86.0,94.0,103.0,106.0,111.0,112.0,117.0,121.0,124.0,126.0,127.0,137.0,138.0,139.0,146.0,150.0,151.0,158.0,163.0,168.0,188.0,196.0,219.0,224.0,248.0,263.0,263.0,266.0,290.0,294.0,313.0,350.0,351.0,359.0,374.0,384.0,400.0,419.0,421.0,488.0,521.0,556.0,578.0,709.0,759.0,784.0,811.0,851.0,1099.0,1109.0,1443.0,2240.0,2394.0,3037.0,6520.0],"xaxis":"x","y":[24147.97331540325,24308.136359310894,24628.46244712618,24628.46244712618,24948.78853494147,25108.95157884911,25108.95157884911,25108.95157884911,25589.440710572042,25589.440710572042,25589.440710572042,25589.440710572042,25589.440710572042,25749.603754479685,25749.603754479685,25909.76679838733,25909.76679838733,25909.76679838733,25909.76679838733,26230.092886202616,26230.092886202616,26390.25593011026,26390.25593011026,26390.25593011026,26550.418974017903,26550.418974017903,26710.582017925546,26870.745061833193,27671.560281371407,27671.560281371407,27831.723325279054,28152.04941309434,28312.212457001984,28792.701588724914,28952.864632632558,29273.190720447845,29273.190720447845,29593.51680826313,29593.51680826313,29753.679852170775,30714.658115616636,30874.82115952428,31515.473335154853,34078.08203767715,34558.57116940008,36000.03856456887,36480.5276962918,36961.01682801473,37121.17987192237,37601.66900364531,38882.973354906455,40324.44075007524,40804.929881798176,41605.7451013364,41765.908145244044,42566.72336478226,43207.37554041283,43687.864672135765,44008.190759951045,44168.35380385869,45769.98424293513,45930.147286842766,46090.31033075041,47211.451638103914,47852.103813734495,48012.26685764214,49133.40816499564,49934.22338453386,50735.03860407208,53938.299482224946,55219.60383348609,58903.353843361896,59704.16906290012,63548.08211668356,65950.52777529822,65950.52777529822,66431.01690702114,70274.92996080458,70915.58213643516,73958.67997068039,79884.7125952632,80044.87563917084,81326.17999043199,83728.62564904665,85330.25608812307,87892.86479064537,90935.9626248906,91256.2887127059,101987.212654518,107272.59310347024,112878.29964023776,116401.88660620592,137383.2453581072,145391.3975534894,149395.4736511805,153719.87583668687,160126.3975929926,199846.8324820882,201448.46292116464,254942.91958631758,382592.8655807094,407257.9743424866,510242.81157510134,1068090.6935054238],"yaxis":"y","type":"scatter"}],                        {"height":600,"legend":{"tracegroupgap":0},"margin":{"t":60},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Comparison of Funding and Mortality Levels (2019)","x":0.5,"xanchor":"center","y":0.95,"yanchor":"top"},"width":800,"xaxis":{"anchor":"y","domain":[0.0,1.0],"range":[0,7000],"title":{"text":"Funding Amount (Millions)"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Total Mortality (2019)"}}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('5a31f3de-d3be-496f-a953-8caee2600f47');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>
<p>Cardiovascular and heart disease both are outliers with about 1 million more deaths per each of these categories compared to the next highest categories for mortality. Funding is also higher for these categories compared to most others, but not proportionally compared to the high mortality seen. Seperate categories for coronary heart disease and hypertension also have high mortality but lower spendign compared to many other categories. Cancer in an outlier for high spending, with 6,520 million dollars going towards cancer research in 2019. The next highest category for funding is HIV/AIDS, which is 3,037 million per year – which is disproportionate to the mortality of 7,150 people in 2019.</p>
<p>This made us curious about what the highest and lowest ratios of funding to mortality were - so we calculated this as well. The plots below show this ratio (million spent per US death), for the highest 20 and lowest 20 ratios. One thing to note with this data is that only US mortality is included with this dataset. So for example, the NIH funded about 21.7 million on malaria research per US malaria death in 2019–but the global death toll is much higher and not accounted for here. Future research should incorporate global mortality rates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># calculate million per death</span>
<span class="n">df2019</span><span class="p">[</span><span class="s1">&#39;ratio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2019</span><span class="p">[</span><span class="s1">&#39;2019&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2019</span><span class="p">[</span><span class="s1">&#39;2019_US_Mortality_19&#39;</span><span class="p">]</span>

<span class="c1"># sort and select top 20 ratio values</span>
<span class="n">df2019_t</span> <span class="o">=</span> <span class="n">df2019</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;ratio&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">20</span><span class="p">]</span>

<span class="c1"># sort and select bottom 20 ratio values</span>
<span class="n">df2019_b</span> <span class="o">=</span> <span class="n">df2019</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;ratio&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Creating figure b</span>
<span class="n">fig3b</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df2019_t</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;ratio&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;research_category&#39;</span><span class="p">,</span> 
              <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span> 
             <span class="n">labels</span><span class="o">=</span><span class="p">{</span>
                     <span class="s2">&quot;ratio&quot;</span><span class="p">:</span> <span class="s2">&quot;Millions in Funding Per US Death&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;research_category&quot;</span><span class="p">:</span> <span class="s2">&quot;Research Category&quot;</span>
                 <span class="p">})</span>

<span class="n">fig3b</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s2">&quot;Ratio of Funding to Mortality (Highest 20)&quot;</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mf">0.95</span><span class="p">,</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="s1">&#39;yanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;top&#39;</span><span class="p">})</span>

<span class="n">fig3b</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="s2">&quot;figures/fig3b.png&quot;</span><span class="p">)</span>

<span class="c1">#fig3b.show()</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig3b</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;fig3b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>                            <div id="a250dfb9-052a-4733-91dc-8e60931567e8" class="plotly-graph-div" style="height:700px; width:800px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a250dfb9-052a-4733-91dc-8e60931567e8")) {                    Plotly.newPlot(                        "a250dfb9-052a-4733-91dc-8e60931567e8",                        [{"alignmentgroup":"True","hovertemplate":"Millions in Funding Per US Death=%{x}<br>Research Category=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"h","showlegend":false,"textposition":"auto","x":[21.77777777777778,17.0,5.5,3.0,1.7894736842105263,0.9736842105263158,0.9375,0.8011049723756906,0.7529411764705882,0.5714285714285714,0.55,0.4969450101832994,0.42475524475524473,0.423728813559322,0.3333333333333333,0.325,0.28205128205128205,0.26666666666666666,0.20276497695852536,0.18181818181818182],"xaxis":"x","y":["Malaria ","Temporomandibular Muscle/Joint Disorder (TMJD) ","Lead Poisoning ","Scleroderma ","Fetal Alcohol Syndrome ","Fragile X Syndrome ","Chronic Fatigue Syndrome (ME/CFS) ","Autism ","Attention Deficit Disorder (ADD) ","Ataxia Telangiectasia ","Tourette Syndrome ","Tuberculosis ","HIV/AIDS 9","Tuberous Sclerosis ","Lyme Disease ","Endometriosis ","Interstitial Cystitis ","West Nile Virus ","Eating Disorders 6","Cystic Fibrosis "],"yaxis":"y","type":"bar"}],                        {"barmode":"relative","height":700,"legend":{"tracegroupgap":0},"margin":{"t":60},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Ratio of Funding to Mortality (Highest 20)","x":0.5,"xanchor":"center","y":0.95,"yanchor":"top"},"width":800,"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Millions in Funding Per US Death"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Research Category"}}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('a250dfb9-052a-4733-91dc-8e60931567e8');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create figure c</span>
<span class="n">fig3c</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df2019_b</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;ratio&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;research_category&#39;</span><span class="p">,</span> 
              <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span> 
               <span class="n">labels</span><span class="o">=</span><span class="p">{</span>
                     <span class="s2">&quot;ratio&quot;</span><span class="p">:</span> <span class="s2">&quot;Millions in Funding Per US Death&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;research_category&quot;</span><span class="p">:</span> <span class="s2">&quot;Research Category&quot;</span>
                 <span class="p">})</span>

<span class="n">fig3c</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s2">&quot;Ratio of Funding to Mortality (Lowest 20)&quot;</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mf">0.95</span><span class="p">,</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="s1">&#39;yanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;top&#39;</span><span class="p">})</span>


<span class="n">fig3c</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="s2">&quot;figures/fig3c.png&quot;</span><span class="p">)</span>

<span class="c1">#fig3c.show()</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig3c</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;fig3c&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>                            <div id="f7fe1740-2776-4a6d-badb-30d7e6291ad9" class="plotly-graph-div" style="height:700px; width:800px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f7fe1740-2776-4a6d-badb-30d7e6291ad9")) {                    Plotly.newPlot(                        "f7fe1740-2776-4a6d-badb-30d7e6291ad9",                        [{"alignmentgroup":"True","hovertemplate":"Millions in Funding Per US Death=%{x}<br>Research Category=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"h","showlegend":false,"textposition":"auto","x":[0.0003581845161950571,0.0005145515567118995,0.000681110857006493,0.0007754608097579126,0.0009063005790149022,0.0010379565053568508,0.001124543154343548,0.0015180479028449342,0.0015204653106538001,0.001632965371802887,0.0018423349170949288,0.0024147298520977964,0.0024573636898260944,0.0025,0.0027615833077631177,0.0027786988527090657,0.0029607726875546126,0.003513812452789468,0.0038782121406742936,0.004110298401191015],"xaxis":"x","y":["Chronic Obstructive Pulmonary Disease ","Hypertension ","Sepsis 15","Heart Disease - Coronary Heart Disease ","Heart Disease ","Pneumonia ","Digestive Diseases - (Peptic Ulcer) ","Emphysema ","Cardiovascular ","Stroke ","Cachexia ","Digestive Diseases - (Gallbladder) ","Suicide ","Myasthenia Gravis ","Uterine Cancer ","Lung Cancer ","Cerebrovascular ","Pneumonia & Influenza ","Diabetes 4","Liver Cancer "],"yaxis":"y","type":"bar"}],                        {"barmode":"relative","height":700,"legend":{"tracegroupgap":0},"margin":{"t":60},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Ratio of Funding to Mortality (Lowest 20)","x":0.5,"xanchor":"center","y":0.95,"yanchor":"top"},"width":800,"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Millions in Funding Per US Death"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Research Category"}}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('f7fe1740-2776-4a6d-badb-30d7e6291ad9');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>
</div>
</div>
<div class="section" id="author-contributions">
<h2>Author Contributions<a class="headerlink" href="#author-contributions" title="Permalink to this headline">¶</a></h2>
<p>This section should indicate, for each team member, what they did in the project.</p>
<p>We all contributed equal amounts to the project and had great communication through email, text, and regular zoom meetings. Madeline Adee focused on the third part of the analysis and the introduction as well as the data cleaning, environment creation, and reproducibility critique of the original dataset. Nina Dickens worked on the first part of the data analysis, creating the functions python files, writing tests for functions, pyproj.toml, <a class="reference external" href="http://setup.py">setup.py</a>, and finally creating the JupyterBook. Meanwhile, Tina Li worked on the second part of the analysis, created our Makefile, README, and creating the Binder link. Although we were each assigned individual parts, ultimately we all helped each other throughout the process and everyone played some sort of role on every aspect of the project.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "nih"
        },
        kernelOptions: {
            kernelName: "nih",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'nih'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="README.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Data analysis of NIH funding by spending category</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Madeline Adee, Nina Dickens, Tina Li<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>